{"version":3,"sources":["scripts/main.js"],"names":["position","prevClick","table","document","querySelector","tbody","tbodyData","querySelectorAll","header","data","doubleClick","forEach","tr","personInfo","children","th","push","innerHTML","sortHandler","pos","compareNumber","a","b","priceToNumber","str","Number","slice","replaceAll","sort","aa","bb","localeCompare","compareString","rerenderHandler","dataBase","person","createElement","appendChild","clickHeaderHandler","addEventListener","e","indexOf","target","index","closest","classList","add","pushNotification","title","description","type","body","message","setTimeout","remove","formHandler","validation","form","insertAdjacentElement","preventDefault","newEmployee","nameInput","positionInput","officeInput","ageInput","salaryInput","value","toLocaleString","employee","length"],"mappings":"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","file":"main.f3ebf6db.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n// write code here\n\nconst table = document.querySelector(`table`);\nconst tbody = document.querySelector(`tbody`);\nconst tbodyData = document.querySelectorAll(`tbody tr`);\nconst header = document.querySelectorAll(`thead tr th`);\nconst data = [];\nlet position;\nlet prevClick;\nlet doubleClick = false;\n\ntbodyData.forEach(tr => {\n  const personInfo = [];\n\n  [...tr.children].forEach(th => {\n    personInfo.push(th.innerHTML);\n  });\n\n  data.push(personInfo);\n});\n\nconst sortHandler = (pos) => {\n  const compareNumber = (a, b) => {\n    if (a > b) {\n      if (doubleClick) {\n        return -1;\n      };\n\n      return 1;\n    }\n\n    if (a < b) {\n      if (doubleClick) {\n        return 1;\n      }\n\n      return -1;\n    }\n\n    if (a === b) {\n      return 0;\n    }\n  };\n\n  const compareString = (a, b) => {\n    if (a.localeCompare(b) > 0) {\n      if (doubleClick) {\n        return -1;\n      };\n\n      return 1;\n    }\n\n    if (a.localeCompare(b) < 0) {\n      if (doubleClick) {\n        return 1;\n      };\n\n      return -1;\n    }\n\n    if (a.localeCompare(b) === 0) {\n      return 0;\n    }\n  };\n\n  const priceToNumber = (str) => Number(str.slice(1).replaceAll(',', ''));\n\n  data.sort((a, b) => {\n    const aa = a[pos];\n    const bb = b[pos];\n\n    if (pos <= 2) {\n      return compareString(aa, bb);\n    }\n\n    if (pos === 3) {\n      return compareNumber(Number(aa), Number(bb));\n    }\n\n    if (pos === 4) {\n      return compareNumber(priceToNumber(aa), priceToNumber(bb));\n    };\n  });\n};\n\nconst rerenderHandler = (dataBase) => {\n  tbody.innerHTML = ``;\n\n  dataBase.forEach(person => {\n    const tr = document.createElement(`tr`);\n\n    tr.innerHTML = `\n      <td>${person[0]}</td>\n      <td>${person[1]}</td>\n      <td>${person[2]}</td>\n      <td>${person[3]}</td>\n      <td>${person[4]}</td>`;\n    tbody.appendChild(tr);\n  });\n};\n\nconst clickHeaderHandler = () => {\n  header.forEach(th => {\n    th.addEventListener(`click`, function(e) {\n      position = [...header].indexOf(e.target);\n\n      if (prevClick === position) {\n        doubleClick = !doubleClick;\n      } else {\n        doubleClick = false;\n      }\n\n      sortHandler(position);\n      rerenderHandler(data);\n      prevClick = position;\n    });\n  });\n};\n\nclickHeaderHandler();\n\ntbody.addEventListener('click', function(e) {\n  const index = [...tbody.children].indexOf(e.target.closest(`tr`));\n\n  rerenderHandler(data);\n  tbody.children[index].classList.add(`active`);\n});\n\nconst pushNotification = (title, description, type) => {\n  // write code here\n  const body = document.querySelector('body');\n  const message = document.createElement('div');\n\n  message.innerHTML = `\n    <div \n      data-qa=\"notification\"\n      class=\"notification ${type}\">\n      <h2 class=\"title\">${title}</h2>\n      <p>${description}</p>\n    </div>`;\n  body.appendChild(message);\n\n  setTimeout(() => message.remove(), 40000);\n};\n\nconst formHandler = () => {\n  const validation = (employee) => {\n    if (employee[0].length < 4) {\n      pushNotification(`Error`, `name has less than 4 letters`, `error`);\n    } else if (employee[1].length < 4) {\n      pushNotification(`Waring`, `fill position input`, `error`);\n    } else if (employee[3] < 18 || employee[3] > 90) {\n      pushNotification(\n        `Error`,\n        `Person with this age is not aligeble employee`,\n        `error`);\n    } else {\n      pushNotification(`Success`, `Data is added to local DataBase`, `success`);\n      data.push(employee);\n      rerenderHandler(data);\n\n      return true;\n    }\n  };\n\n  const form = document.createElement(`form`);\n\n  form.classList.add(`new-employee-form`);\n\n  form.innerHTML = `\n    <label>\n      Name:\n      <input type=\"text\" name =\"name\" data-qa=\"name\" required>\n    </label>\n    <label>\n      Position:\n      <input type=\"text\" name =\"position\" data-qa=\"position\" >\n    </label>\n    <label>\n      Office:\n      <select name=\"office\" data-qa=\"office\">\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>\n      </select>\n    </label>\n    <label>\n      Age:\n      <input type=\"number\" name=\"age\" data-qa=\"age\" required>\n    </label>\n    <label>\n      Salary:\n      <input type=\"number\" name=\"salary\" data-qa=\"salary\" required>\n    </label>\n    <button>Save to table</button>`;\n  table.insertAdjacentElement(`afterend`, form);\n\n  form.addEventListener(`submit`, function(e) {\n    e.preventDefault();\n\n    const newEmployee = [];\n    const nameInput = document.querySelector(`[data-qa=\"name\"]`);\n    const positionInput = document.querySelector(`[data-qa=\"position\"]`);\n    const officeInput = document.querySelector(`[data-qa=\"office\"]`);\n    const ageInput = document.querySelector(`[data-qa=\"age\"]`);\n    const salaryInput = document.querySelector(`[data-qa=\"salary\"]`);\n\n    newEmployee[0] = nameInput.value;\n    newEmployee[1] = positionInput.value;\n    newEmployee[2] = officeInput.value;\n    newEmployee[3] = ageInput.value;\n    newEmployee[4] = `$${Number(salaryInput.value).toLocaleString(`en`)}`;\n\n    const success = validation(newEmployee);\n\n    if (success) {\n      nameInput.value = positionInput.value\n      = ageInput.value = salaryInput.value = ``;\n\n      officeInput.value = `Tokyo`;\n    }\n  });\n};\n\nformHandler();\n"]}